<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coffee Gallery â€“ The Coffee Corner</title>
    <meta name="description" content="A gallery of our coffees, pastries, and brewing process at The Coffee Corner.">
    <style>
        .gallery {
            display: flex;
            flex-wrap: nowrap;
            gap: 16px;
            justify-content: center;
            padding: 10px;
        }

        .gallery figure {
            flex: 0 0 auto;
            text-align: center;
        }

        .gallery img {
            border-radius: 12px;
            object-fit: cover;
            display: block;
            margin: 0 auto;
        }

        .gallery figcaption {
            margin-top: 8px;
            font-size: 2rem;
            color: #333;
        }

        .video-wrap {
            margin-top: 24px;
            text-align: center;
        }
    </style>
</head>

<body>
    <header>
        <h1>Coffee Gallery</h1>
    </header>

    <main>
        <section class="gallery">
            <figure>
                <img src="images/espresso.jpg" alt="Rich espresso shot" width="300" height="200" loading="lazy" decoding="async">
                <figcaption>Espresso</figcaption>
            </figure>
            <figure>
                <img src="images/cappuccino.jpg" alt="Foamy cappuccino" width="300" height="200" loading="lazy" decoding="async">
                <figcaption>Cappuccino</figcaption>
            </figure>
            <figure>
                <img src="images/latte-art.jpg" alt="Latte with art" width="300" height="200" loading="lazy" decoding="async">
                <figcaption>Latte Art</figcaption>
            </figure>
            <figure>
                <img src="images/croissant.jpg" alt="Fresh croissant" width="300" height="200" loading="lazy" decoding="async">
                <figcaption>Croissant</figcaption>
            </figure>
        </section>

        <section class="video-wrap">
            <h2>How We Brew</h2>
            <!-- Lazy video: will load only when near viewport -->
            <video id="brewVideo" width="800" height="450" controls preload="none" poster="media/brew-poster.jpg" muted></video>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var video = document.getElementById('brewVideo');
            video.setAttribute('data-src', 'media/brew.mp4');

            var io = new IntersectionObserver(function (entries) {
                entries.forEach(function (entry) {
                    if (entry.isIntersecting) {
                        if (!video.getAttribute('src')) {
                            video.setAttribute('src', video.getAttribute('data-src'));
                        }
                        io.unobserve(video);
                    }
                });
            }, { rootMargin: '200px' });

            io.observe(video);
        });
    </script>
</body>

</html>
